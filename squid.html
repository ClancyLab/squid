
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Squid &#8212; Squid 2.0.35 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Overview" href="overview.html" />
    <link rel="prev" title="Squid - Table of Contents" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Squid - Table of Contents"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Squid 2.0.35 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="squid">
<h1>Squid<a class="headerlink" href="#squid" title="Permalink to this headline">¶</a></h1>
<p>Squid is an open-source molecular simulation codebase developed by the Clancy Lab at the Johns Hopkins University. The codebase includes simplified Molecular Dynamics (MD) and Density Functional Theory (DFT) simulation submission, as well as other utilities such as file I/O and post-processing.</p>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>For most, the easiest way to install squid is to use pip install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>user@local<span class="o">]</span>~% pip install clancylab-squid
</pre></div>
</div>
<p>If you wish, you may also clone the repository though:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>user@local<span class="o">]</span>~% <span class="nb">cd</span> ~<span class="p">;</span> git clone https://github.com/ClancyLab/squid.git
</pre></div>
</div>
<p>Note, you will need various additional software to fully take advantage of squid.  We include some helper scripts to aid you in setting up these files; however, these are not robust and we do encourage you to setup your own development environment.  Nevertheless, if you so choose, the following information may be of use:</p>
<p><strong>Setup on Ubuntu</strong></p>
<ol class="arabic simple">
<li>Ensure that your system is up-to-date with relevant softare.  The following commands will help.</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>user@local<span class="o">]</span>~% sudo apt-get update
<span class="o">[</span>user@local<span class="o">]</span>~% sudo apt-get upgrade
<span class="o">[</span>user@local<span class="o">]</span>~% sudo apt-get install build-essential make cmake g++ git swig mpich lmod
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>As the above line installs lmod, we have found that there may be a bug in the default install.  If you find that when you open a terminal you are getting a weird error about posix not existing, this is a bug in lua install. Simply put, take the path it wants and make a simlink to point to posix_c.so.  An example of how to do this is as follows (note, your lua version and directories may or may not be the same).</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>user@local<span class="o">]</span>~% sudo ln -s /usr/lib/x86_64-linux-gnu/lua/5.2/posix_c.so /usr/lib/x86_64-linux-gnu/lua/5.2/posix.so
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Setup your directories.  In this case, we want all programs installed to the <em>~/programs folder</em>, and all modules installed to <em>~/.modules</em>.</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>user@local<span class="o">]</span>~% mkdir ~/programs<span class="p">;</span> mkdir ~/.modules
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Setup a default environment file for lmod.  In this case, we are making an empty one.</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>user@local<span class="o">]</span>~% touch ~/.modules/StdEnv.lua
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Ensure that lmod is setup.  This can be done by ensuring that the <em>~/.bashrc</em> is updated accordingly.  Note, do not blindly copy, but understand what the following lines of code do!</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># LMOD Setup</span>
<span class="k">if</span> <span class="o">[</span> -f /usr/share/lmod/6.6/init/bash <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    . /usr/share/lmod/6.6/init/bash
<span class="k">fi</span>
module use /home/<span class="nv">$USER</span>/.modules
<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$__Init_Default_Modules</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">export</span> <span class="nv">__Init_Default_Modules</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>

  <span class="nv">LMOD_SYSTEM_DEFAULT_MODULES</span><span class="o">=</span><span class="si">${</span><span class="nv">LMOD_SYSTEM_DEFAULT_MODULES</span><span class="k">:-</span><span class="s2">&quot;StdEnv&quot;</span><span class="si">}</span>
  <span class="nb">export</span> LMOD_SYSTEM_DEFAULT_MODULES
  module --initial_load --no_redirect restore
<span class="k">else</span>
  module refresh
<span class="k">fi</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Install as much as possible from squid.  This can be done by running the following command:</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">squid.installers</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Get relevant path information</span>
<span class="n">home_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
<span class="n">program_folder</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/programs&quot;</span> <span class="o">%</span> <span class="n">home_folder</span>
<span class="n">module_folder</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/.modules&quot;</span> <span class="o">%</span> <span class="n">home_folder</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">program_folder</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">program_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">module_folder</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">module_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># As we plan to get orca/4.2.0, we need openmpi/3.1.4</span>
<span class="n">openmpi_installer</span><span class="p">(</span><span class="n">program_folder</span><span class="p">,</span> <span class="s2">&quot;3.1.4&quot;</span><span class="p">,</span> <span class="n">module_folder</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Note, because you may want some programs for others, it is recommended that you first setup openmpi, as above, then return to install the others.  This requires that you also load the openmpi module before compiling the next programs.</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">squid.installers</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Get relevant path information</span>
<span class="n">home_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
<span class="n">program_folder</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/programs&quot;</span> <span class="o">%</span> <span class="n">home_folder</span>
<span class="n">module_folder</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/.modules&quot;</span> <span class="o">%</span> <span class="n">home_folder</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">program_folder</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">program_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">module_folder</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">module_folder</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># LAMMPS has many install options.  Here we simplify things.</span>
<span class="c1"># Note, we can only choose between mpi or serial.</span>
<span class="c1"># Note, &quot;16Mar18_mpi&quot; is the name of the module in the lammps</span>
<span class="c1"># submodule folder.  Be unique!</span>
<span class="n">lammps_installer</span><span class="p">(</span>
    <span class="n">program_folder</span><span class="p">,</span> <span class="s2">&quot;16Mar18&quot;</span><span class="p">,</span> <span class="s2">&quot;mpi&quot;</span><span class="p">,</span> <span class="s2">&quot;16Mar18_mpi&quot;</span><span class="p">,</span>
    <span class="n">compiler</span><span class="o">=</span><span class="s2">&quot;mpicxx&quot;</span><span class="p">,</span>
    <span class="n">extra_lammps_packages</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;RIGID&quot;</span><span class="p">,</span> <span class="s2">&quot;PYTHON&quot;</span><span class="p">,</span> <span class="s2">&quot;REPLICA&quot;</span><span class="p">,</span> <span class="s2">&quot;USER-MISC&quot;</span><span class="p">,</span> <span class="s2">&quot;USER-REAXC&quot;</span><span class="p">],</span>
    <span class="n">smrff_path</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
    <span class="n">MODULEDIR</span><span class="o">=</span><span class="n">module_folder</span>
<span class="p">)</span>

<span class="c1"># Install packmol</span>
<span class="n">packmol_installer</span><span class="p">(</span><span class="n">program_folder</span><span class="p">,</span> <span class="n">module_folder</span><span class="p">)</span>

<span class="c1"># Install nlopt</span>
<span class="n">nlopt_installer</span><span class="p">(</span><span class="n">program_folder</span><span class="p">,</span> <span class="s2">&quot;2.6.1&quot;</span><span class="p">,</span> <span class="n">module_folder</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li>Download Orca from <a class="reference external" href="https://orcaforum.kofo.mpg.de/app.php/dlext/">https://orcaforum.kofo.mpg.de/app.php/dlext/</a> (note, you’ll have to register), and make your own orca module.  An example is listed below (it would be saved in the modules folder as a .lua file.)</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>help<span class="o">([[</span>
For detailed instructions, go to:
    https://orcaforum.cec.mpg.de/

    <span class="o">]])</span>
whatis<span class="o">(</span><span class="s2">&quot;Version: 4.2.0&quot;</span><span class="o">)</span>
whatis<span class="o">(</span><span class="s2">&quot;Keywords: Orca 4&quot;</span><span class="o">)</span>
whatis<span class="o">(</span><span class="s2">&quot;URL: https://orcaforum.cec.mpg.de/&quot;</span><span class="o">)</span>
whatis<span class="o">(</span><span class="s2">&quot;Description: Orca 4&quot;</span><span class="o">)</span>

load<span class="o">(</span><span class="s2">&quot;openmpi/3.1.4&quot;</span><span class="o">)</span>

prepend_path<span class="o">(</span><span class="s2">&quot;PATH&quot;</span>,               <span class="s2">&quot;/home/username/programs/orca/4.2.0&quot;</span><span class="o">)</span>
prepend_path<span class="o">(</span><span class="s2">&quot;LD_LIBRARY_PATH&quot;</span>,    <span class="s2">&quot;/home/username/programs/orca/4.2.0&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>If you would like to be an active developer within the Clancy Group, please contact the project maintainer to be added as a collaborator on the project.  Otherwise, you are welcome to submit pull requests as you see fit, and they will be addressed.</p>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Documentation is necessary, and the following steps MUST be followed during contribution of new code:</p>
<p><strong>Setup</strong></p>
<ol class="arabic simple">
<li>Download <a class="reference external" href="http://www.sphinx-doc.org/en/stable/">Sphinx</a>.  This can be done simply if you have <a class="reference external" href="https://pip.pypa.io/en/stable/installing/">pip</a> installed via <cite>pip install -U Sphinx</cite></li>
<li>Wherever you have <em>squid</em> installed, you want another folder called <em>squid-docs</em> (NOT as a subfolder of squid).</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>user@local<span class="o">]</span>~% <span class="nb">cd</span> ~<span class="p">;</span> mkdir squid-docs<span class="p">;</span> <span class="nb">cd</span> squid-docs<span class="p">;</span> git clone -b gh-pages git@github.com:clancylab/squid.git html
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Forever more just ignore that directory (don’t delete it though)</li>
</ol>
<p><strong>Adding Documentation</strong></p>
<p>Documentation is done using <a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickref.html">ReStructuredText</a> format docstrings, the <a class="reference external" href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> python package, and indices with autodoc extensions.  To add more documentation, first add the file to be included in <cite>docs/source/conf.py</cite> under <cite>os.path.abspath(‘example/dir/to/script.py’)</cite>.  Secondly, ensure that you have proper docstrings in the python file, and finally run <cite>make full</cite> to re-generate the documentation and commit it to your local branch, as well as the git <em>gh-pages</em> branch.</p>
<p>For anymore information on documentation, the tutorial follwed can be found <a class="reference external" href="https://daler.github.io/sphinxdoc-test/includeme.html">here</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Squid</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing">Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="console_scripts.html">Console Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Squid - Table of Contents</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="overview.html"
                        title="next chapter">Overview</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/squid.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Squid - Table of Contents"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Squid 2.0.35 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Henry Herbol.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>